
\begin{tikzpicture}[%
	->,
	>=stealth',
	shorten >=1pt,
	auto,
	node distance=3.25cm,
	scale=0.9,
	transform shape,
	align=center,
	smallnode/.style={inner sep=1.4},
	initial text =,
	anchor=center]
	
	\node[state, initial above, initial text =](1){$\loc{1}$};
	\node[state] (head) [below of=1] {$\loc{4}$};
	\node[state] (loopEntry)[left of=head] {$\loc{5}$};
	\node[state] (if)[above of=loopEntry] {$\loc{6}$};
	
 	\node[state] (else)[below of=loopEntry] {$\loc{10}$};
	\node[state] (loopExit)[right of=head] {$\loc{13}$};
	
	\node[state] (assertTrue)[below left of=loopExit] {$\loc{14}$};
	\node[state, accepting] (assertFalse)[below of=loopExit] {$\loc{err}$};
	
	\path (1) edge node []{\st{x:=0;}\\ \st{y:=2;}\\ \st{z:=3;}} (head)
	
	(head) edge node []{\color<3>{emblue}\st{x<=21}} (loopEntry)
	(head) edge node []{\color<3>{emblue}\st{x>21}} (loopExit)
	
	(loopEntry) edge[] node []{\color<3>{emblue}\st{x<=10}} (if)
	(if) edge[]node []{\\ \color<3>{emblue} \st{z:=x;}\\ \color<3>{emblue}\st{x:=x+y;}\\\color<3>{emblue} \st{y:=y+1}} (head)
	
	(loopEntry) edge[]node []{\color<3>{emblue}\st{x>10}} (else)
	(else) edge[] node []{\color<3>{emblue}\st{x:=x+2;}\\ \color<3>{emblue}\st{y:=y-3}} (head)
	
	(loopExit) edge node []{\st{x==22}} (assertTrue)
	(loopExit) edge node []{\st{x!=22}} (assertFalse)
	;
\end{tikzpicture}

